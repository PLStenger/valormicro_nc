# valormicro_nc
Characterization of marine microbial resources for analysis and enhancement of New Caledonia's natural heritage - Project from Drs **Anton Véronique** (CNRS/IRD Nouméa - New Caledonia)

### Installing pipeline :

First, open your terminal. Then, run these two command lines :

    cd -place_in_your_local_computer
    git clone https://github.com/PLStenger/valormicro_nc.git

### Update the pipeline in local by :

    git pull

### Running the script with :

    time nohup bash pipeline_complete.sh &> pipeline_complete.out
   
# VALORMICRO PIPELINE INSTALLATION - DIRECT COMMANDS

# 1. Create and navigate to working directory
export ROOTDIR="/XXXXXX/valormicro_nc"
mkdir -p "$ROOTDIR"/{00_scripts,01_raw_data,02_qualitycheck,03_cleaned_data,04_qualitycheck,05_QIIME2/{core,visual},98_databasefiles,99_softwares/adapters,exports,tmp}
cd "$ROOTDIR"

# 2. Install Miniconda (if not already installed)
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda.sh
bash ~/miniconda.sh -b -p "$HOME/miniconda3"
source "$HOME/miniconda3/etc/profile.d/conda.sh"
conda init bash
source ~/.bashrc

# 3. Install Mamba to accelerate installations
conda install -y -c conda-forge mamba

# 4. Create conda environments
mamba create -y -n fastqc -c bioconda fastqc
mamba create -y -n multiqc -c bioconda multiqc  
mamba create -y -n trimmomatic -c bioconda trimmomatic
mamba create -y -n python-bio python=3.9 pandas numpy

# 5. Install QIIME2 2021.4
wget https://data.qiime2.org/distro/core/qiime2-2021.4-py38-linux-conda.yml
mamba env create -n qiime2-2021.4 --file qiime2-2021.4-py38-linux-conda.yml
rm qiime2-2021.4-py38-linux-conda.yml

# 6. Install GNU Parallel
mamba install -y -c conda-forge parallel

# 7. Create Trimmomatic adapter file
cat > "$ROOTDIR/99_softwares/adapters/sequences.fasta" << 'EOF'
>Illumina_TruSeq_LT_R1
AGATCGGAAGAGCACACGTCTGAACTCCAGTCAC
>Illumina_TruSeq_LT_R2
AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT
>Illumina_TruSeq_Small_RNA
TGGAATTCTCGGGTGCCAAGG
>Illumina_TruSeq_Small_RNA_02
TCGTATGCCGTCTTCTGCTTGT
>truseq
AGATCGGAAGAGC
>nextera
CTGTCTCTTATACACATC
>small
TGGAATTCTCGGGTGCCAAGG
>ScriptSeqR1
AGATCGGAAGAGCACACGTCTGAAC
>ScriptSeqR2
AGATCGGAAGAGCGTCGTGTAGGGA
>TruSeqRibo
AGATCGGAAGAGCACACGTCT
>Illumina_Smallrna_Seq_3'_Adapter_01
TCGTATGCCGTCTTCTGCTTGT
>Illumina_Smallrna_Seq_3'_Adapter_02
TGGAATTCTCGGGTGCCAAGG
>PrefixNX/1
AGATGTGTATAAGAGACAG
>PrefixNX/2
AGATGTGTATAAGAGACAG
>Trans1
TCGTCGGCAGCGTCAGATGTGTATAAGAGACAG
>Trans1_rc
CTGTCTCTTATACACATCTGACGCTGCCGACGA
>Trans2
GTCTCGTGGGCTCGGAGATGTGTATAAGAGACAG
>Trans2_rc
CTGTCTCTTATACACATCTCCGAGCCCACGAGAC
>TruSeq_single_index_and_TruSeq_CD_index_Read_01
AGATCGGAAGAGCACACGTCTGAACTCCAGTCA
>TruSeq_single_index_and_TruSeq_CD_index_Read_02
AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT
>AmpliSeq
CTGTCTCTTATACACATCT
>Circularized_Duplicate_Junction_Adapter
CTGTCTCTTATACACATCTAGATGTGTATAAGAGACAG
>Circularized_Single_Junction_Adapter
CTGTCTCTTATACACATCT
>Circularized_Single_Junction_Adapter_Reverse_Complement
AGATGTGTATAAGAGACAG
>Read_1_External_Adapter
GATCGGAAGAGCACACGTCTGAACTCCAGTCAC
>Read_2_External_Adapter
GATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT
>Reverse_adapter
AGATCGGAAGAGCACACGTCTGAACTCCAGTCACATCACGATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Universal_Adapter
AATGATACGGCGACCACCGAGATCTACACTCTTTCCCTACACGACGCTCTTCCGATCT
>pcr_dimer
AATGATACGGCGACCACCGAGATCTACACTCTTTCCCTACACGACGCTCTTCCGATCTAGATCGGAAGAGCGGTTCAGCAGGAATGCCGAGACCGATCTCGTATGCCGTCTTCTGCTTG
>PCR_Primers
AATGATACGGCGACCACCGAGATCTACACTCTTTCCCTACACGACGCTCTTCCGATCTCAAGCAGAAGACGGCATACGAGCTCTTCCGATCT
>TruSeq_Adapter_Index_1_6
GATCGGAAGAGCACACGTCTGAACTCCAGTCACATCACGATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_2
GATCGGAAGAGCACACGTCTGAACTCCAGTCACCGATGTATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_3
GATCGGAAGAGCACACGTCTGAACTCCAGTCACTTAGGCATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_4
GATCGGAAGAGCACACGTCTGAACTCCAGTCACTGACCAATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_5
GATCGGAAGAGCACACGTCTGAACTCCAGTCACACAGTGATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_6
GATCGGAAGAGCACACGTCTGAACTCCAGTCACGCCAATATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_7
GATCGGAAGAGCACACGTCTGAACTCCAGTCACCAGATCATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_8
GATCGGAAGAGCACACGTCTGAACTCCAGTCACACTTGAATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_9
GATCGGAAGAGCACACGTCTGAACTCCAGTCACGATCAGATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_10
GATCGGAAGAGCACACGTCTGAACTCCAGTCACTAGCTTATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_11
GATCGGAAGAGCACACGTCTGAACTCCAGTCACGGCTACATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_12
GATCGGAAGAGCACACGTCTGAACTCCAGTCACCTTGTAATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_13
GATCGGAAGAGCACACGTCTGAACTCCAGTCACAGTCAACAATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_14
GATCGGAAGAGCACACGTCTGAACTCCAGTCACAGTTCCGTATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_15
GATCGGAAGAGCACACGTCTGAACTCCAGTCACATGTCAGAATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_16
GATCGGAAGAGCACACGTCTGAACTCCAGTCACCCGTCCCGATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_18_7
GATCGGAAGAGCACACGTCTGAACTCCAGTCACGTCCGCACATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_19
GATCGGAAGAGCACACGTCTGAACTCCAGTCACGTGAAACGATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_20
GATCGGAAGAGCACACGTCTGAACTCCAGTCACGTGGCCTTATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_21
GATCGGAAGAGCACACGTCTGAACTCCAGTCACGTTTCGGAATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_22
GATCGGAAGAGCACACGTCTGAACTCCAGTCACCGTACGTAATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_23
GATCGGAAGAGCACACGTCTGAACTCCAGTCACGAGTGGATATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_25
GATCGGAAGAGCACACGTCTGAACTCCAGTCACACTGATATATCTCGTATGCCGTCTTCTGCTTG
>TruSeq_Adapter_Index_27
GATCGGAAGAGCACACGTCTGAACTCCAGTCACATTCCTTTATCTCGTATGCCGTCTTCTGCTTG
>I5_Nextera_Transposase_1
CTGTCTCTTATACACATCTGACGCTGCCGACGA
>I7_Nextera_Transposase_1
CTGTCTCTTATACACATCTCCGAGCCCACGAGAC
>I5_Nextera_Transposase_2
CTGTCTCTTATACACATCTCTGATGGCGCGAGGGAGGC
>I7_Nextera_Transposase_2
CTGTCTCTTATACACATCTCTGAGCGGGCTGGCAAGGC
>I5_Primer_Nextera_XT_and_Nextera_Enrichment_[N/S/E]501
GACGCTGCCGACGAGCGATCTAGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_and_Nextera_Enrichment_[N/S/E]502
GACGCTGCCGACGAATAGAGAGGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_and_Nextera_Enrichment_[N/S/E]503
GACGCTGCCGACGAAGAGGATAGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_and_Nextera_Enrichment_[N/S/E]504
GACGCTGCCGACGATCTACTCTGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_and_Nextera_Enrichment_[N/S/E]505
GACGCTGCCGACGACTCCTTACGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_and_Nextera_Enrichment_[N/S/E]506
GACGCTGCCGACGATATGCAGTGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_and_Nextera_Enrichment_[N/S/E]507
GACGCTGCCGACGATACTCCTTGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_and_Nextera_Enrichment_[N/S/E]508
GACGCTGCCGACGAAGGCTTAGGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_and_Nextera_Enrichment_[N/S/E]517
GACGCTGCCGACGATCTTACGCGTGTAGATCTCGGTGGTCGCCGTATCATT
>I7_Primer_Nextera_XT_and_Nextera_Enrichment_N701
CCGAGCCCACGAGACTAAGGCGAATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_and_Nextera_Enrichment_N702
CCGAGCCCACGAGACCGTACTAGATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_and_Nextera_Enrichment_N703
CCGAGCCCACGAGACAGGCAGAAATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_and_Nextera_Enrichment_N704
CCGAGCCCACGAGACTCCTGAGCATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_and_Nextera_Enrichment_N705
CCGAGCCCACGAGACGGACTCCTATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_and_Nextera_Enrichment_N706
CCGAGCCCACGAGACTAGGCATGATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_and_Nextera_Enrichment_N707
CCGAGCCCACGAGACCTCTCTACATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_and_Nextera_Enrichment_N708
CCGAGCCCACGAGACCAGAGAGGATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_and_Nextera_Enrichment_N709
CCGAGCCCACGAGACGCTACGCTATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_and_Nextera_Enrichment_N710
CCGAGCCCACGAGACCGAGGCTGATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_and_Nextera_Enrichment_N711
CCGAGCCCACGAGACAAGAGGCAATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_and_Nextera_Enrichment_N712
CCGAGCCCACGAGACGTAGAGGAATCTCGTATGCCGTCTTCTGCTTG
>I5_Primer_Nextera_XT_Index_Kit_v2_S502
GACGCTGCCGACGAATAGAGAGGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S503
GACGCTGCCGACGAAGAGGATAGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S505
GACGCTGCCGACGACTCCTTACGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S506
GACGCTGCCGACGATATGCAGTGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S507
GACGCTGCCGACGATACTCCTTGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S508
GACGCTGCCGACGAAGGCTTAGGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S510
GACGCTGCCGACGAATTAGACGGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S511
GACGCTGCCGACGACGGAGAGAGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S513
GACGCTGCCGACGACTAGTCGAGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S515
GACGCTGCCGACGAAGCTAGAAGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S516
GACGCTGCCGACGAACTCTAGGGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S517
GACGCTGCCGACGATCTTACGCGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S518
GACGCTGCCGACGACTTAATAGGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S520
GACGCTGCCGACGAATAGCCTTGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S521
GACGCTGCCGACGATAAGGCTCGTGTAGATCTCGGTGGTCGCCGTATCATT
>I5_Primer_Nextera_XT_Index_Kit_v2_S522
GACGCTGCCGACGATCGCATAAGTGTAGATCTCGGTGGTCGCCGTATCATT
>I7_Primer_Nextera_XT_Index_Kit_v2_N701
CCGAGCCCACGAGACTAAGGCGAATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N702
CCGAGCCCACGAGACCGTACTAGATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N703
CCGAGCCCACGAGACAGGCAGAAATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N704
CCGAGCCCACGAGACTCCTGAGCATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N705
CCGAGCCCACGAGACGGACTCCTATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N706
CCGAGCCCACGAGACTAGGCATGATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N707
CCGAGCCCACGAGACCTCTCTACATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N710
CCGAGCCCACGAGACCGAGGCTGATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N711
CCGAGCCCACGAGACAAGAGGCAATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N712
CCGAGCCCACGAGACGTAGAGGAATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N714
CCGAGCCCACGAGACGCTCATGAATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N715
CCGAGCCCACGAGACATCTCAGGATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N716
CCGAGCCCACGAGACACTCGCTAATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N718
CCGAGCCCACGAGACGGAGCTACATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N719
CCGAGCCCACGAGACGCGTAGTAATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N720
CCGAGCCCACGAGACCGGAGCCTATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N721
CCGAGCCCACGAGACTACGCTGCATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N722
CCGAGCCCACGAGACATGCGCAGATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N723
CCGAGCCCACGAGACTAGCGCTCATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N724
CCGAGCCCACGAGACACTGAGCGATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N726
CCGAGCCCACGAGACCCTAAGACATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N727
CCGAGCCCACGAGACCGATCAGTATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N728
CCGAGCCCACGAGACTGCAGCTAATCTCGTATGCCGTCTTCTGCTTG
>I7_Primer_Nextera_XT_Index_Kit_v2_N729
CCGAGCCCACGAGACTCGACGTCATCTCGTATGCCGTCTTCTGCTTG
>I5_Adapter_Nextera
CTGATGGCGCGAGGGAGGCGTGTAGATCTCGGTGGTCGCCGTATCATT
>I7_Adapter_Nextera_No_Barcode
CTGAGCGGGCTGGCAAGGCAGACCGATCTCGTATGCCGTCTTCTGCTTG
>Nextera_LMP_Read1_External_Adapter
GATCGGAAGAGCACACGTCTGAACTCCAGTCAC
>Nextera_LMP_Read2_External_Adapter
GATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT
>RNA_Adapter_(RA5)_part_#_15013205
GATCGTCGGACTGTAGAACTCTGAAC
>RNA_Adapter_(RA3)_part_#_15013207
CCTTGGCACCCGAGAATTCCA
>Stop_Oligo_(STP)_8
CCACGGGAACGTGGTGGAATTC
>RNA_RT_Primer_(RTP)_part_#_15013981
TGGAATTCTCGGGTGCCAAGGC
>RNA_PCR_Primer_(RP1)_part_#_15013198
TCGGACTGTAGAACTCTGAACGTGTAGATCTCGGTGGTCGCCGTATCATT
>RNA_PCR_Primer_Index_1_(RPI1)_2,9
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACATCACGATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_2_(RPI2)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCGATGTATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_3_(RPI3)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACTTAGGCATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_4_(RPI4)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACTGACCAATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_5_(RPI5)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACACAGTGATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_6_(RPI6)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACGCCAATATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_7_(RPI7)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCAGATCATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_8_(RPI8)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACACTTGAATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_9_(RPI9)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACGATCAGATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_10_(RPI10)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACTAGCTTATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_11_(RPI11)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACGGCTACATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_12_(RPI12)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCTTGTAATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_13_(RPI13)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACAGTCAAATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_14_(RPI14)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACAGTTCCATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_15_(RPI15)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACATGTCAATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_16_(RPI16)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCCGTCCATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_17_(RPI17)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACGTAGAGATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_18_(RPI18)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACGTCCGCATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_19_(RPI19)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACGTGAAAATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_20_(RPI20)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACGTGGCCATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_21_(RPI21)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACGTTTCGATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_22_(RPI22)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCGTACGATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_23_(RPI23)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACGAGTGGATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_24_(RPI24)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACGGTAGCATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_25_(RPI25)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACACTGATATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_26_(RPI26)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACATGAGCATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_27_(RPI27)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACATTCCTATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_28_(RPI28)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCAAAAGATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_29_(RPI29)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCAACTAATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_30_(RPI30)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCACCGGATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_31_(RPI31)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCACGATATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_32_(RPI32)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCACTCAATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_33_(RPI33)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCAGGCGATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_34_(RPI34)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCATGGCATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_35_(RPI35)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCATTTTATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_36_(RPI36)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCCAACAATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_37_(RPI37)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCGGAATATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_38_(RPI38)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCTAGCTATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_39_(RPI39)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCTATACATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_40_(RPI40)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACCTCAGAATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_41_(RPI41)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACGACGACATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_42_(RPI42)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACTAATCGATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_43_(RPI43)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACTACAGCATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_44_(RPI44)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACTATAATATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_45_(RPI45)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACTCATTCATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_46_(RPI46)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACTCCCGAATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_47_(RPI47)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACTCGAAGATCTCGTATGCCGTCTTCTGCTTG
>RNA_PCR_Primer_Index_48_(RPI48)
TGGAATTCTCGGGTGCCAAGGAACTCCAGTCACTCGGCAATCTCGTATGCCGTCTTCTGCTTG
>PhiX_read1_adapter
AGATCGGAAGAGCGGTTCAGCAGGAATGCCGAGACCGATCTCGTATGCCGTCTTCTGCTTGAAA
>PhiX_read2_adapter
AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGTAGATCTCGGTGGTCGCCGTATCATTAAAAAA
EOF

# 8. Download SILVA database
cd "$ROOTDIR/98_databasefiles"
wget -O silva-138-99-515-926-nb-classifier.qza \
    "https://data.qiime2.org/2021.4/common/silva-138-99-515-806-nb-classifier.qza"

# 9. Add configuration to .bashrc
cat >> ~/.bashrc << 'EOF'

# === VALORMICRO PIPELINE ===
export VALORMICRO_ROOT="/nvme/bio/data_fungi/valormicro_nc"
alias qiime2='conda activate qiime2-2021.4'
alias fastqc='conda activate fastqc'
EOF

source ~/.bashrc




# Test environments
conda env list
conda activate qiime2-2021.4 && qiime --version
conda activate fastqc && fastqc --version  
conda activate trimmomatic && trimmomatic -version
parallel --version

# Test files
ls -la "$ROOTDIR/99_softwares/adapters/"
ls -la "$ROOTDIR/98_databasefiles/"



# If conda is not found
source "$HOME/miniconda3/etc/profile.d/conda.sh"

# If permission issues
sudo chown -R $(whoami):$(whoami) "$ROOTDIR"

# If QIIME2 fails to install
mamba create -n qiime2-2021.4 -c qiime2 -c bioconda -c conda-forge qiime2=2021.4

# If SILVA database fails
wget -O "$ROOTDIR/98_databasefiles/silva-138-99-515-926-nb-classifier.qza" \
    "https://data.qiime2.org/2021.4/common/silva-138-99-nb-classifier.qza"
